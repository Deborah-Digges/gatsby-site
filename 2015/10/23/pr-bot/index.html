<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a958a4287dc123cfa21f.css">*{box-sizing:border-box}body,html{margin:0;padding:0}html{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5}@media (min-width:38em){html{font-size:20px}}body{color:#515151;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a{color:#268bd2;text-decoration:none}a strong{color:inherit}a:focus,a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:700;line-height:1.25;text-rendering:optimizeLegibility}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}h3{margin-top:1.5rem;font-size:1.25rem}h4,h5,h6{margin-top:1rem;font-size:1rem}p{margin-top:0;margin-bottom:1rem}strong{color:#303030}dl,ol,ul{margin-top:0;margin-bottom:1rem}dt{font-weight:700}dd{margin-bottom:.5rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr{font-size:85%;font-weight:700;color:#555;text-transform:uppercase}abbr[title]{cursor:help;border-bottom:1px dotted #e5e5e5}code,pre{font-family:Menlo,Monaco,Courier New,monospace}code{padding:.25em .5em;font-size:85%;color:#bf616a;border-radius:3px}code,pre{background-color:#f9f9f9}pre{display:block;margin-top:0;margin-bottom:1rem;padding:1rem;font-size:.8rem;line-height:1.4;white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word}pre code{padding:0;font-size:100%;color:inherit;background-color:transparent}.highlight{margin-bottom:1rem;border-radius:4px}.highlight pre{margin-bottom:0}.gist .gist-file{font-family:Menlo,Monaco,Courier New,monospace!important}.gist .markdown-body{padding:15px}.gist pre{padding:0;background-color:transparent}.gist .gist-file .gist-data{font-size:.8rem!important;line-height:1.4}.gist code{padding:0;color:inherit;background-color:transparent;border-radius:0}blockquote{padding:.5rem 1rem;margin:.8rem 0;color:#7a7a7a;border-left:.25rem solid #e5e5e5}blockquote p:last-child{margin-bottom:0}@media (min-width:30em){blockquote{padding-right:5rem;padding-left:1.25rem}}img{display:block;max-width:100%;margin:0 0 1rem;border-radius:5px}table{margin-bottom:1rem;width:100%;border:1px solid #e5e5e5;border-collapse:collapse}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}.lead{font-size:1.25rem;font-weight:300}.message{margin-bottom:1rem;padding:1rem;color:#717171;background-color:#f9f9f9}.container{max-width:38rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}body,html{overflow-x:hidden}html{font-family:"PT Serif",Georgia,Times New Roman,serif}h1,h2,h3,h4,h5,h6{font-family:Calendas_Plus,Helvetica,Arial,sans-serif;font-weight:400;color:#313131;letter-spacing:-.025rem}.wrap{position:relative;width:100%}.container{max-width:28rem}@media (min-width:38em){.container{max-width:32rem}}@media (min-width:56em){.container{max-width:38rem}}.masthead{padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem;border-bottom:1px solid #eee}.masthead-container{margin-right:1rem;margin-left:1rem;display:flex;justify-content:space-between;align-items:center}.masthead-nav{display:flex}.masthead-nav h4{margin-left:2em}.masthead-title{margin-top:0;margin-bottom:0;color:#505050}.masthead-title a{color:#505050}.masthead-title small{font-size:75%;font-weight:400;color:silver;letter-spacing:0}@media (max-width:48em){.masthead-title{text-align:center}}.page,.post{margin-bottom:4em}.page-title,.post-title,.post-title a{color:#303030}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-.5rem;margin-bottom:1rem;color:#9a9a9a}.related{padding-top:2rem;padding-bottom:2rem;border-top:1px solid #eee}.related-posts{padding-left:0;list-style:none}.related-posts h3{margin-top:0}.related-posts li small{font-size:75%;color:#999}.related-posts li a:hover{color:#268bd2;text-decoration:none}.related-posts li a:hover small{color:inherit}img{clear:both;margin:0 auto}.align-center{text-align:center}.disclaimer-header{background-color:#bd6666;padding:2%;margin:5%;color:#fff;border-radius:5px;-webkit-border-radius:5px;-moz-border-radius:5px}@font-face{font-family:Calendas_Plus;src:url(/static/Calendas_Plus-4988e3b187a55c809d2358cfa8e2d340.otf) format("opentype")}</style><meta name="generator" content="Gatsby 2.24.53"/><link as="script" rel="preload" href="/webpack-runtime-c4214cb327f2e6d8ac3f.js"/><link as="script" rel="preload" href="/styles-1211262dd08146354a2f.js"/><link as="script" rel="preload" href="/framework-8c8d363c63d1a9a80d21.js"/><link as="script" rel="preload" href="/app-066ba96331d18d279169.js"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-2a78e23ce79482fd97dd.js"/><link as="fetch" rel="preload" href="/page-data/2015/10/23/pr-bot/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><body class="theme-base-13 sidebar-overlay"><div class="wrap"><div class="masthead"><div class="masthead-container"><h1 class="masthead-title"><a title="Home" href="/">Deb&#x27;s</a> <small>Doodles</small></h1><div class="masthead-nav"><h2 class="masthead-title"><a href="/about">About</a></h2></div></div></div><div class="container content"><div class="post"><h1 class="post-title">PR Bot</h1><span class="post-date">2015-10-23</span><div><p>Being a collaborator for the <a href="http://openhatch.org">Open Hatch Community</a>, I often request new contributors to send in an email to permit us to use their work; it involves commenting on every pull request on the project submitted by a new contributor.</p>
<blockquote>
<p>There is no time for cut-and-dried monotony. There is time for work. And time for love. That leaves
no other time. - <a href="https://en.wikipedia.org/wiki/Coco_Chanel">Coco Chanel</a></p>
</blockquote>
<p><em>Why not automate it?</em> This led me to the Github API, in particular the <a href="https://developer.github.com/v3/activity/events/">Events API</a>, which provides a feed of the interesting things happening on a repository. The Event of interest to me was the <a href="https://developer.github.com/v3/activity/events/types/#pullrequestevent">Pull Request Event</a>, that is triggered on every state change to a pull request on Github.</p>
<p>Github allows subscription to events through WebHooks. A webhook allows one to configure a URL to which a POST request will be sent, if and when the event of interest is triggered. The POST body will have data relevant to the event, which for the Pull Request Event includes: the <em>action</em>—what state change occurred on the Pull Request Object—the Pull Request ID, and the Pull Request Object itself.</p>
<p>The next thing to do was to figure out how to comment on a Pull Request using the Github API. It seemed <a href="https://developer.github.com/v3/pulls/comments/#create-a-comment">simple enough</a>. However, it turned out that the dubious Pull Request API for comments is meant for commenting on diffs only and not on the pull request as a whole. <a href="https://developer.github.com/v3/issues/comments/">The Issues API for comments</a> is what is to be used for commenting on Pull Requests as well—counterintuitive as that may be. </p>
<p>The API for creating a comment has the signature: <code>/repos/:owner/:repo/issues/:number/comments</code>. I was confused as to how to get an <em>issue number</em> corresponding to a pull request, as there is usually no one-to-one correspondence between them. The final piece of the puzzle was the <code>_links</code> field in the POST body that contains the API endpoint for creating comments on that pull request.</p>
<p><img src="../images/automation.png" alt="XKCD Automation"></p>
<p>It remains to be seen of how much use this tool will be.</p>
<p>Check out the code <a href="https://github.com/Deborah-Digges/pr-bot">here</a> ; see pr-bot in action by submitting a Pull Request! :) </p></div></div></div></div></body></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2015/10/23/pr-bot/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-1841db332360a105faeb.js"],"app":["/app-066ba96331d18d279169.js"],"component---src-pages-index-js":["/component---src-pages-index-js-741ba3c07f2717a9cf69.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-2a78e23ce79482fd97dd.js"]};/*]]>*/</script><script src="/polyfill-1841db332360a105faeb.js" nomodule=""></script><script src="/component---src-templates-blog-template-js-2a78e23ce79482fd97dd.js" async=""></script><script src="/app-066ba96331d18d279169.js" async=""></script><script src="/framework-8c8d363c63d1a9a80d21.js" async=""></script><script src="/styles-1211262dd08146354a2f.js" async=""></script><script src="/webpack-runtime-c4214cb327f2e6d8ac3f.js" async=""></script></body></html>